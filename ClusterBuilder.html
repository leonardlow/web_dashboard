<!DOCTYPE html>

<!-- v01 - 20250303 - LL -->
<!-- v02 - 20250305 - LL -->
<!-- v03 - 20250307 - LL -->
<!-- v04 - 20250318 - LL -->
<!-- v05 - 20250320 - LL -->
<!-- v06 - 20250321 - LL -->
<!-- v07 - 20250325 - LL -->
<!-- v08 - 20250328 - LL -->
<!-- v09 - 20250402 - LL - removed logging feature -->
<!-- v10 - 20250402 - LL - removed cluster interface feature -->
<!-- v11 - 20250403 - LL - removed topology selection. hardcoded instead -->
<!-- v12 - 20250403 - LL - added instructions -->
<!-- v13 - 20250423 - LL - updated model appliance to config -->
<!-- v14 - 20250430 - LL - update anti-spoofing default to 'true' -->
<!-- v15 - 20250505 - added Gateway/Cluster toggle and gateway input form -->

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cluster Builder Input Form</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .section { display: none; margin-bottom: 20px; }
        .section.active { display: block; }
        .nav { margin-bottom: 20px; }
        .nav button { margin-right: 10px; }
        .dynamic-logging { margin-top: 10px; }
		.version {
			font-size: 0.67em; /* Adjust the size as needed */
			display: inline-block;
			margin-left: 10px; /* Optional: Add some space between the title and version */
		}
        pre { white-space: pre-wrap; word-wrap: break-word; }
        .ipv6-config { display: none; }

    </style>
    <script>
        // Function to show a specific section based on the button clicked
        function showSection(sectionId) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
        }


        // Function to dynamically add logging server input fields
<!--        function addLoggingServer() { -->
<!--            const container = document.getElementById('logging-servers'); -->
<!--            const index = container.children.length + 1; -->
<!--            const div = document.createElement('div'); -->
<!--            div.className = 'dynamic-logging'; -->
<!--            div.innerHTML = ` -->
<!--                <label for="logging-server-${index}">Logging Server ${index}:</label> -->
<!--                <input type="text" id="logging-server-${index}" name="logging-server-${index}"> -->
<!--                <label for="backup-server-${index}">Backup Server:</label> -->
<!--               <input type="checkbox" id="backup-server-${index}" name="backup-server-${index}"> -->
<!--            `; -->
<!--            container.appendChild(div); -->
        		

        // Function to toggle the display of IPv6 configuration fields
        function toggleIPv6Config() {
            const ipv6Checkbox = document.getElementById('enable-ipv6');
            const ipv6Config = document.querySelectorAll('.ipv6-config');
            ipv6Config.forEach(config => {
                config.style.display = ipv6Checkbox.checked ? 'block' : 'none';
            });
        }

        // Function to generate the cluster configuration string
        function generateString() {
            const clusterName = document.getElementById('cluster-name').value;
            const version = document.getElementById('version').value;
            const ipAddress = document.getElementById('ip-address').value;
            const ipMaskLength = document.getElementById('ip-mask-length').value;
            const hardware = document.getElementById('hardware').value;
            const engineerName = document.getElementById('engineer-name').value;
            const useVirtualMac = document.getElementById('use-virtual-mac').checked ? 'true' : 'false';
            const member1Name = document.getElementById('member1-name').value;
            const member1MgmtName = document.getElementById('member1-mgmt-name').value;
            const member1MgmtIpv4 = document.getElementById('member1-mgmt-ipv4').value;
            const member1MgmtMask = document.getElementById('member1-mgmt-mask').value;
<!--            const member1Topology = document.getElementById('member1-topology').value; -->
            const member2Name = document.getElementById('member2-name').value;
            const member2MgmtName = document.getElementById('member2-mgmt-name').value;
            const member2MgmtIpv4 = document.getElementById('member2-mgmt-ipv4').value;
            const member2MgmtMask = document.getElementById('member2-mgmt-mask').value;
<!--            const member2Topology = document.getElementById('member2-topology').value; -->

            const configString = `add simple-cluster name ${clusterName} version ${version} ip-address ${ipAddress} os-name Gaia hardware ${hardware} cluster-mode cluster-xl-ha firewall true vpn false ips true anti-bot false anti-virus false application-control false url-filtering false interfaces.1.name Mgmt interfaces.1.ip-address ${ipAddress} interfaces.1.mask-length ${ipMaskLength} interfaces.1.interface-type private interfaces.1.topology internal interfaces.1.anti-spoofing true members.1.name ${member1Name} members.1.one-time-password vpn123 members.1.ipv4-address ${member1MgmtIpv4} members.1.interfaces.1.name ${member1MgmtName} members.1.interfaces.1.ipv4-address ${member1MgmtIpv4} members.1.interfaces.1.ipv4-mask-length ${member1MgmtMask} members.1.interfaces.1.topology internal members.2.name ${member2Name} members.2.one-time-password vpn123 members.2.ipv4-address ${member2MgmtIpv4} members.2.interfaces.1.name ${member2MgmtName} members.2.interfaces.1.ipv4-address ${member2MgmtIpv4} members.2.interfaces.1.ipv4-mask-length ${member2MgmtMask} members.2.interfaces.1.topology internal cluster-settings.track-changes-of-cluster-members log cluster-settings.state-synchronization.enabled true cluster-settings.state-synchronization.delayed true cluster-settings.state-synchronization.delayed-seconds 3 cluster-settings.use-virtual-mac ${useVirtualMac} comments "pending integration - ${engineerName}"`;
            document.getElementById('config-output').textContent = configString.trim();
        }

        // Function to generate SIC commands for cluster members
        function generateSicCommand() {
            const member1Name = document.getElementById('member1-name').value;
            const member2Name = document.getElementById('member2-name').value;
            const sicCommand1 = `test-sic-status name "${member1Name}"`;
            const sicCommand2 = `test-sic-status name "${member2Name}"`;
            document.getElementById('sic-command-output').textContent = `${sicCommand1}\n${sicCommand2}`;
        }

        // Function to generate interface configuration command
        function generateInterfaceCommand() {
            const clusterName = document.getElementById('cluster-name-interfaces').value;
            const interface2Name = document.getElementById('interface2-name').value;
            const interface2Ipv4Address = document.getElementById('interface2-ipv4-address').value;
            const interface2Ipv4NetMask = document.getElementById('interface2-ipv4-net-mask').value;
            const interface2Ipv6Address = document.getElementById('interface2-ipv6-address').value;
            const interface2Ipv6NetMask = document.getElementById('interface2-ipv6-net-mask').value;
            const interface2Topology = document.getElementById('interface2-topology').value;
            const interface3Name = document.getElementById('interface3-name').value;
            const interface3Ipv4Address = document.getElementById('interface3-ipv4-address').value;
            const interface3Ipv4NetMask = document.getElementById('interface3-ipv4-net-mask').value;
            const interface3Ipv6Address = document.getElementById('interface3-ipv6-address').value;
            const interface3Ipv6NetMask = document.getElementById('interface3-ipv6-net-mask').value;
            const interface3Topology = document.getElementById('interface3-topology').value;
            const enableIPv6 = document.getElementById('enable-ipv6').checked;
            let command = `set simple-cluster name ${clusterName} interfaces.2.name ${interface2Name} interfaces.2.ipv4-address ${interface2Ipv4Address} interfaces.2.ipv4-net-mask ${interface2Ipv4NetMask} interfaces.2.topology ${interface2Topology} interfaces.3.name ${interface3Name} interfaces.3.ipv4-address ${interface3Ipv4Address} interfaces.3.ipv4-net-mask ${interface3Ipv4NetMask} interfaces.3.topology ${interface3Topology}`;
            if (enableIPv6) {
                command += ` interfaces.2.ipv6-address ${interface2Ipv6Address} interfaces.2.ipv6-net-mask ${interface2Ipv6NetMask} interfaces.3.ipv6-address ${interface3Ipv6Address} interfaces.3.ipv6-net-mask ${interface3Ipv6NetMask}`;
            }
            document.getElementById('interface-command-output').textContent = command.trim();
        }

        // Function to get interfaces for cluster members
        function getInterfaces() {
            const clusterName = document.getElementById('cluster-name').value;
            const member1Name = document.getElementById('member1-name').value; 
            const member2Name = document.getElementById('member2-name').value;
            const getInterfacesCommand0 = `get-interfaces target-name "${clusterName}" with-topology false`;
            const getInterfacesCommand1 = `get-interfaces target-name "${member1Name}" with-topology false`;
            const getInterfacesCommand2 = `get-interfaces target-name "${member2Name}" with-topology false`;
            document.getElementById('sic-command-output').textContent = `${getInterfacesCommand0}`;
			<!-- {getInterfacesCommand1}\n${getInterfacesCommand2}`; -->
        }
    </script>
</head>

<body>
    <h2>Select Type</h2>
    <label><input type="radio" name="buildType" value="cluster" checked> Cluster</label>
    <label><input type="radio" name="buildType" value="gateway"> Gateway</label>

    <div id="cluster-section" class="section">
        <!-- Existing Cluster Form -->
<form><!-- cluster form not found --></form></div>
    <div id="gateway-section" class="section" style="display:none;">
        <h3>Gateway Configuration</h3>
        <form>
            <label>Name: <input type="text" name="gw-name"></label><br>
            <label>IP Address: <input type="text" name="gw-ip"></label><br>
            <label>Send Logs To Server: <input type="text" name="gw-primary-log-server"></label><br>
            <label>Send Logs To Backup Server: <input type="text" name="gw-backup-log-server"></label><br>
            <label>Stop Logging Threshold (%): <input type="number" name="gw-stop-thresh"></label><br>
            <label>Alert Threshold (%): <input type="number" name="gw-alert-thresh"></label><br>
            <label>Delete Threshold (%): <input type="number" name="gw-delete-thresh"></label><br>
            <label>OS Name: <input type="text" name="gw-os" value="Gaia"></label><br>
            <label>Version: <input type="text" name="gw-version" value="R81.10"></label><br>
        </form>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const clusterSection = document.getElementById("cluster-section");
            const gatewaySection = document.getElementById("gateway-section");
            const radios = document.getElementsByName("buildType");

            function toggleSections() {
                if (radios[0].checked) {
                    clusterSection.style.display = "block";
                    gatewaySection.style.display = "none";
                } else {
                    clusterSection.style.display = "none";
                    gatewaySection.style.display = "block";
                }
            }

            radios.forEach(radio => {
                radio.addEventListener("change", toggleSections);
            });

            toggleSections();
        });
    </script>
</body>
</html>

