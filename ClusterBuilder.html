<!DOCTYPE html>

<!-- v01 - 20250303 - LL -->
<!-- v02 - 20250305 - LL -->
<!-- v03 - 20250307 - LL -->
<!-- v04 - 20250318 - LL -->
<!-- v05 - 20250320 - LL -->
<!-- v06 - 20250321 - LL -->
<!-- v07 - 20250325 - LL -->
<!-- v08 - 20250328 - LL -->
<!-- v09 - 20250402 - LL - removed logging feature -->
<!-- v10 - 20250402 - LL - removed cluster interface feature -->
<!-- v11 - 20250403 - LL - removed topology selection. hardcoded instead -->
<!-- v12 - 20250403 - LL - added instructions -->
<!-- v13 - 20250423 - LL - updated model appliance to config -->
<!-- v14 - 20250430 - LL - update anti-spoofing default to 'true' -->
<!-- v15 - 20250505 - LL - added gateway creation (for maestro) -->
<!-- v15.1 - 20250506 - LL - fixed gateway script placement + layout alignment -->


<html lang="en">
<head>
    
    <link rel="icon" type="image/png" href="images/cpfw_favicon.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cluster Builder Input Form</title>
    
<style>
label {
    display: block;
    margin-top: 10px;
    font-weight: bold;
}
input[type="text"], select, textarea {
    font-family: Arial, sans-serif;
    font-size: 14px;
    padding: 6px;
    margin-bottom: 10px;
    width: 100%;
    max-width: 500px;
    box-sizing: border-box;
    border: 1px solid #ccc;
    border-radius: 4px;
}
button {
    margin-top: 10px;
    padding: 6px 12px;
}
</style>

<style>
.centered-container {
    max-width: 800px;
    margin: 0 auto;
}
</style>

<style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .section { display: none; margin-bottom: 20px; }
        .section.active { display: block; }
        .nav { margin-bottom: 20px; }
        .nav button { margin-right: 10px; }
        .dynamic-logging { margin-top: 10px; }
		.version {
			font-size: 0.67em; /* Adjust the size as needed */
			display: inline-block;
			margin-left: 10px; /* Optional: Add some space between the title and version */
		}
        pre { white-space: pre-wrap; word-wrap: break-word; }
        .ipv6-config { display: none; }

    
<style>
input[type="text"], select, textarea {
    font-family: Arial, sans-serif;
    font-size: 14px;
    padding: 6px;
    margin-bottom: 10px;
    width: 100%;
    max-width: 500px;
    box-sizing: border-box;
    border: 1px solid #ccc;
    border-radius: 4px;
}
button {
    margin-top: 10px;
    padding: 6px 12px;
}
</style>
</style>
    <script>
        // Function to show a specific section based on the button clicked
        function showSection(sectionId) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
        }


        // Function to dynamically add logging server input fields
<!--        function addLoggingServer() { -->
<!--            const container = document.getElementById('logging-servers'); -->
<!--            const index = container.children.length + 1; -->
<!--            const div = document.createElement('div'); -->
<!--            div.className = 'dynamic-logging'; -->
<!--            div.innerHTML = ` -->
<!--                <label for="logging-server-${index}">Logging Server ${index}:</label> -->
<!--                <input type="text" id="logging-server-${index}" name="logging-server-${index}"> -->
<!--                <label for="backup-server-${index}">Backup Server:</label> -->
<!--               <input type="checkbox" id="backup-server-${index}" name="backup-server-${index}"> -->
<!--            `; -->
<!--            container.appendChild(div); -->
        		

        // Function to toggle the display of IPv6 configuration fields
        function toggleIPv6Config() {
            const ipv6Checkbox = document.getElementById('enable-ipv6');
            const ipv6Config = document.querySelectorAll('.ipv6-config');
            ipv6Config.forEach(config => {
                config.style.display = ipv6Checkbox.checked ? 'block' : 'none';
            });
        }

        // Function to generate the cluster configuration string
        function generateString() {
            const clusterName = document.getElementById('cluster-name').value;
            const version = document.getElementById('version').value;
            const ipAddress = document.getElementById('ip-address').value;
            const ipMaskLength = document.getElementById('ip-mask-length').value;
            const hardware = document.getElementById('hardware').value;
            const engineerName = document.getElementById('engineer-name').value;
            const useVirtualMac = document.getElementById('use-virtual-mac').checked ? 'true' : 'false';
            const member1Name = document.getElementById('member1-name').value;
            const member1MgmtName = document.getElementById('member1-mgmt-name').value;
            const member1MgmtIpv4 = document.getElementById('member1-mgmt-ipv4').value;
            const member1MgmtMask = document.getElementById('member1-mgmt-mask').value;
<!--            const member1Topology = document.getElementById('member1-topology').value; -->
            const member2Name = document.getElementById('member2-name').value;
            const member2MgmtName = document.getElementById('member2-mgmt-name').value;
            const member2MgmtIpv4 = document.getElementById('member2-mgmt-ipv4').value;
            const member2MgmtMask = document.getElementById('member2-mgmt-mask').value;
<!--            const member2Topology = document.getElementById('member2-topology').value; -->

            const configString = `add simple-cluster name ${clusterName} version ${version} ip-address ${ipAddress} os-name Gaia hardware ${hardware} cluster-mode cluster-xl-ha firewall true vpn false ips true anti-bot false anti-virus false application-control false url-filtering false interfaces.1.name Mgmt interfaces.1.ip-address ${ipAddress} interfaces.1.mask-length ${ipMaskLength} interfaces.1.interface-type private interfaces.1.topology internal interfaces.1.anti-spoofing true members.1.name ${member1Name} members.1.one-time-password vpn123 members.1.ipv4-address ${member1MgmtIpv4} members.1.interfaces.1.name ${member1MgmtName} members.1.interfaces.1.ipv4-address ${member1MgmtIpv4} members.1.interfaces.1.ipv4-mask-length ${member1MgmtMask} members.1.interfaces.1.topology internal members.2.name ${member2Name} members.2.one-time-password vpn123 members.2.ipv4-address ${member2MgmtIpv4} members.2.interfaces.1.name ${member2MgmtName} members.2.interfaces.1.ipv4-address ${member2MgmtIpv4} members.2.interfaces.1.ipv4-mask-length ${member2MgmtMask} members.2.interfaces.1.topology internal cluster-settings.track-changes-of-cluster-members log cluster-settings.state-synchronization.enabled true cluster-settings.state-synchronization.delayed true cluster-settings.state-synchronization.delayed-seconds 3 cluster-settings.use-virtual-mac ${useVirtualMac} comments "pending integration - ${engineerName}"`;
            document.getElementById('config-output').textContent = configString.trim();
        }

        // Function to generate SIC commands for cluster members
        function generateSicCommand() {
            const member1Name = document.getElementById('member1-name').value;
            const member2Name = document.getElementById('member2-name').value;
            const sicCommand1 = `test-sic-status name "${member1Name}"`;
            const sicCommand2 = `test-sic-status name "${member2Name}"`;
            document.getElementById('sic-command-output').textContent = `${sicCommand1}\n${sicCommand2}`;
        }

        // Function to generate interface configuration command
        function generateInterfaceCommand() {
            const clusterName = document.getElementById('cluster-name-interfaces').value;
            const interface2Name = document.getElementById('interface2-name').value;
            const interface2Ipv4Address = document.getElementById('interface2-ipv4-address').value;
            const interface2Ipv4NetMask = document.getElementById('interface2-ipv4-net-mask').value;
            const interface2Ipv6Address = document.getElementById('interface2-ipv6-address').value;
            const interface2Ipv6NetMask = document.getElementById('interface2-ipv6-net-mask').value;
            const interface2Topology = document.getElementById('interface2-topology').value;
            const interface3Name = document.getElementById('interface3-name').value;
            const interface3Ipv4Address = document.getElementById('interface3-ipv4-address').value;
            const interface3Ipv4NetMask = document.getElementById('interface3-ipv4-net-mask').value;
            const interface3Ipv6Address = document.getElementById('interface3-ipv6-address').value;
            const interface3Ipv6NetMask = document.getElementById('interface3-ipv6-net-mask').value;
            const interface3Topology = document.getElementById('interface3-topology').value;
            const enableIPv6 = document.getElementById('enable-ipv6').checked;
            let command = `set simple-cluster name ${clusterName} interfaces.2.name ${interface2Name} interfaces.2.ipv4-address ${interface2Ipv4Address} interfaces.2.ipv4-net-mask ${interface2Ipv4NetMask} interfaces.2.topology ${interface2Topology} interfaces.3.name ${interface3Name} interfaces.3.ipv4-address ${interface3Ipv4Address} interfaces.3.ipv4-net-mask ${interface3Ipv4NetMask} interfaces.3.topology ${interface3Topology}`;
            if (enableIPv6) {
                command += ` interfaces.2.ipv6-address ${interface2Ipv6Address} interfaces.2.ipv6-net-mask ${interface2Ipv6NetMask} interfaces.3.ipv6-address ${interface3Ipv6Address} interfaces.3.ipv6-net-mask ${interface3Ipv6NetMask}`;
            }
            document.getElementById('interface-command-output').textContent = command.trim();
        }

        // Function to get interfaces for cluster members
        function getInterfaces() {
            const clusterName = document.getElementById('cluster-name').value;
            const member1Name = document.getElementById('member1-name').value; 
            const member2Name = document.getElementById('member2-name').value;
            const getInterfacesCommand0 = `get-interfaces target-name "${clusterName}" with-topology false`;
            const getInterfacesCommand1 = `get-interfaces target-name "${member1Name}" with-topology false`;
            const getInterfacesCommand2 = `get-interfaces target-name "${member2Name}" with-topology false`;
            document.getElementById('sic-command-output').textContent = `${getInterfacesCommand0}`;
			<!-- {getInterfacesCommand1}\n${getInterfacesCommand2}`; -->
        }
    </script>
</head>
<body>
<div class="centered-container">
    <img src="images/clusterBuild.png" alt="Cluster Builder" style="height: 200px;"> <span class="version">v15.1</span>
	<div class="nav">
        <!-- Navigation buttons to switch between sections -->
        <button onclick="showSection('gateway-section')">0 - Gateway Build</button>
		<button onclick="showSection('cluster-config')">1 - Cluster Build</button>
        <button onclick="showSection('sic-validation')">2 - Members: SIC/Interfaces</button>
        <button onclick="showSection('instructions')">3 - Instructions</button>
        <!-- <button onclick="showSection('configure-interfaces')">3 - Cluster Interface Update</button> -->
    </div>
    <div class="section" id="cluster-config">
        <h2>*** This form is to be used to create Checkpoint Firewall Clusters ***</h2>
        <!-- Input fields for cluster configuration -->
        <label for="cluster-name">Cluster Name:</label>
        <input type="text" id="cluster-name" name="cluster-name"><br>
        <label for="version">Version:</label>
        <select id="version" name="version">
            <option value="R81.10">R81.10</option>
            <option value="R81.20">R81.20</option>
        </select><br>
        <label for="ip-address">IP Address:</label>
        <input type="text" id="ip-address" name="ip-address"><br>
         <label for="ip-mask-length">IP Mask Length:</label>
        <input type="text" id="ip-mask-length" name="ip-mask-length"><br>
        <label for="hardware">Hardware:</label>
        <select id="hardware" name="hardware">
            <option value="CloudGuard IaaS">CloudGuard IaaS</option>
            <option value="'16000 Appliance'">16000 Appliance</option>
            <option value="'29000 Appliance'">29000 Appliance</option>
        </select><br>
        <label for="engineer-name">Created by (Engineer Name):</label>
        <input type="text" id="engineer-name" name="engineer-name"><br>
        <h3>Cluster Settings</h3>
        <label for="use-virtual-mac">Use Virtual MAC: (DO NOT select for CloudGuard)</label>
        <input type="checkbox" id="use-virtual-mac" name="use-virtual-mac"><br>
        <h2>Member 1 Configuration</h2>
        <!-- Input fields for Member 1 configuration -->
        <label for="member1-name">Name:</label>
        <input type="text" id="member1-name" name="member1-name"><br>
        <label for="member1-mgmt-name">Mgmt Interface Name:</label>
        <select id="member1-mgmt-name" name="member1-mgmt-name">
            <option value="Mgmt">Mgmt</option>
            <option value="eth0">eth0</option>
        </select><br>
        <label for="member1-mgmt-ipv4">Mgmt IPv4 Address:</label>
        <input type="text" id="member1-mgmt-ipv4" name="member1-mgmt-ipv4" oninput="document.getElementById('member1-ipv4').value = this.value;"><br>
        <label for="member1-mgmt-mask">Mgmt Network Mask Length:</label>
        <input type="text" id="member1-mgmt-mask" name="member1-mgmt-mask"><br>
<!--        <label for="member1-topology">Topology:</label>
        <select id="member1-topology" name="member1-topology">
            <option value="internal">internal</option>
            <option value="external">external</option>
        </select> -->
		<br>
        <h2>Member 2 Configuration</h2>
        <!-- Input fields for Member 2 configuration -->
        <label for="member2-name">Name:</label>
        <input type="text" id="member2-name" name="member2-name"><br>
        <label for="member2-mgmt-name">Mgmt Interface Name:</label>
        <select id="member2-mgmt-name" name="member2-mgmt-name">
            <option value="Mgmt">Mgmt</option>
            <option value="eth0">eth0</option>
        </select><br>
        <label for="member2-mgmt-ipv4">Mgmt IPv4 Address:</label>
        <input type="text" id="member2-mgmt-ipv4" name="member2-mgmt-ipv4" oninput="document.getElementById('member2-ipv4').value = this.value;"><br>
        <label for="member2-mgmt-mask">Mgmt Network Mask Length:</label>
        <input type="text" id="member2-mgmt-mask" name="member2-mgmt-mask"><br>
<!--        <label for="member2-topology">Topology:</label>
        <select id="member2-topology" name="member2-topology">
            <option value="internal">internal</option>
            <option value="external">external</option>
        </select> -->
		<br>

<!--        <h2>Logging Configuration</h2> -->
        <!-- Container for dynamically added logging server input fields -->
<!--        <div id="logging-servers">
            <div class="dynamic-logging">
                <label for="logging-server-1">Logging Server 1:</label>
                <input type="text" id="logging-server-1" name="logging-server-1">
                <label for="backup-server-1">Backup Server:</label>
                <input type="checkbox" id="backup-server-1" name="backup-server-1">
            </div>
        </div>

        <button type="button" onclick="addLoggingServer()">Add Logging Server</button>
-->	


        <h2>Generate/Copy Configuration</h2>
        <!-- Button to generate the configuration string -->
        <button type="button" onclick="generateString()">Generate String</button>
        <pre id="config-output"></pre>
    </div>
    <div class="section" id="sic-validation">
        <h2>Members: SIC/Interfaces</h2>
        <!-- Buttons to generate SIC commands and get interfaces -->
        <button type="button" onclick="generateSicCommand()">Generate SIC Commands</button>
        <button type="button" onclick="getInterfaces()">Get Interfaces</button>
        <pre id="sic-command-output"></pre>
    </div>
    <div class="section" id="instructions"> 
        <h2>** This is purely informational to assist with follow up tasks after the simple-cluster has been created **</h2>
        <!-- Overview instructions -->
		<h4>1. Cluster Build</h4>
			<blockquote>
			- Provide simple cluster mgmt info<br>
			- Generate 1 liner <br>
			- Login to Smart Console <br>
			- Open command prompt <br>
			- Apply 1-liner to the respective domain <br>
			</blockquote>
		<br>
		<h4>2. SIC/Interfaces</h4>
			<blockquote>
			- Click [Generate SIC Commands]<br>
			- copy/paste commands into command prompt<br>
			</blockquote>

		<h4>3. Get Interfaces</h4>
			<blockquote>
			- Click [Get Interfaces]<br>
			- copy/paste command into command prompt<br>
			</blockquote>

		<section>
		<h4>follow up tasks:</h4>
		<blockquote>
		 <h4>- Cluster Interface Updates</h4>
			 - dbl-click cluster<br>
			 - go to network management<br>
			 
			 <h4>SYNC:</h4>
			 - change network type on Sync interface to "Sync"<br>

			 <h4>ETH1-01:</h4>
			 - change network type on eth1-01 to "cluster" <br>
			 - enter virtual IP/mask <br>
			 - change topology settings on eth1-01 to external<br>

			 <h4>ETH1-02:</h4>
			 - change network type on eth1-02 to "cluster" <br>
			 - enter virtual IP/mask <br>
			 - leave topology settings on eth1-02 to internal <br>
			 - click OK <br>

		 <h4>- Logs</h4>
			 - Select Logs<br>
			 - Select Primary log servers from list<br>
			 - Select Backup log servers from list<br>
			 - click OK<br>
		</section>
		</div>
<!--        <h2>3 - Cluster Interface Update</h2> -->
        <!-- Input fields for cluster interface update -->
<!--        <label for="cluster-name-interfaces">Cluster Name:</label>
        <input type="text" id="cluster-name-interfaces" name="cluster-name-interfaces"><br>
        <label for="enable-ipv6">Enable IPv6:</label>
        <input type="checkbox" id="enable-ipv6" name="enable-ipv6" onclick="toggleIPv6Config()"><br>
        <h3>Interface 2 Configuration</h3>
        <label for="interface2-name">Interface 2 Name:</label>
        <select id="interface2-name" name="interface2-name">
            <option value="eth1-01">eth1-01</option>
            <option value="eth1-02">eth1-02</option>
            <option value="eth1">eth1</option>
            <option value="eth2">eth2</option>
        </select><br>
        <label for="interface2-ipv4-address">Interface 2 IPv4 Address:</label>
        <input type="text" id="interface2-ipv4-address" name="interface2-ipv4-address"><br>
        <label for="interface2-ipv4-net-mask">Interface 2 IPv4 Net Mask:</label>
        <input type="text" id="interface2-ipv4-net-mask" name="interface2-ipv4-net-mask"><br>
        <div class="ipv6-config">
            <label for="interface2-ipv6-address">Interface 2 IPv6 Address:</label>
            <input type="text" id="interface2-ipv6-address" name="interface2-ipv6-address"><br>
            <label for="interface2-ipv6-net-mask">Interface 2 IPv6 Net Mask:</label>
            <input type="text" id="interface2-ipv6-net-mask" name="interface2-ipv6-net-mask"><br>
        </div>
        <label for="interface2-topology">Interface 2 Topology:</label>
        <select id="interface2-topology" name="interface2-topology">
            <option value="internal">internal</option>
            <option value="external">external</option>
        </select><br>
        <h3>Interface 3 Configuration</h3>
        <label for="interface3-name">Interface 3 Name:</label>
        <select id="interface3-name" name="interface3-name">
            <option value="eth1-01">eth1-01</option>
            <option value="eth1-02">eth1-02</option>
            <option value="eth1">eth1</option>
            <option value="eth2">eth2</option>
        </select><br>
        <label for="interface3-ipv4-address">Interface 3 IPv4 Address:</label>
        <input type="text" id="interface3-ipv4-address" name="interface3-ipv4-address"><br>
        <label for="interface3-ipv4-net-mask">Interface 3 IPv4 Net Mask:</label>
        <input type="text" id="interface3-ipv4-net-mask" name="interface3-ipv4-net-mask"><br>
        <div class="ipv6-config">
            <label for="interface3-ipv6-address">Interface 3 IPv6 Address:</label>
            <input type="text" id="interface3-ipv6-address" name="interface3-ipv6-address"><br>
            <label for="interface3-ipv6-net-mask">Interface 3 IPv6 Net Mask:</label>
            <input type="text" id="interface3-ipv6-net-mask" name="interface3-ipv6-net-mask"><br>
        </div>
        <label for="interface3-topology">Interface 3 Topology:</label>
        <select id="interface3-topology" name="interface3-topology">
            <option value="internal">internal</option>
            <option value="external">external</option>
        </select><br>
-->
        <!-- Button to generate the interface configuration command -->
<!--        <button type="button" onclick="generateInterfaceCommand()">Generate Command</button>
        <pre id="interface-command-output"></pre>
    </div>
-->
</div>
	<div class="section active" id="gateway-section">
		<div class="centered-container">
			<h2>Gateway Build</h2>
			<label>Gateway Name:</label>
			<input type="text" id="gw-name"><br>

			<label>IP Address:</label>
			<input type="text" id="gw-ip"><br>

			<label>Version:</label>
			<select id="gw-version">
				<option value="R81.10">R81.10</option>
				<option value="R81.20">R81.20</option>
			</select><br>

			<input type="hidden" id="gw-stop-thresh" value="10">
			<input type="hidden" id="gw-alert-thresh" value="11">
			<input type="hidden" id="gw-delete-thresh" value="20">
			<input type="hidden" id="gw-os" value="Gaia">

			<label>Engineer Name:</label>
			<input type="text" id="gw-engineer-name"><br>

			<hr style="margin: 20px 0;">
			<button onclick="generateGatewayCommand()">Generate Gateway Command</button><br><br>
			<textarea id="gateway-command-output" rows="5" cols="100" readonly></textarea><br>
			<button onclick="copyGatewayCommand()">Copy to Clipboard</button>
		</div>

	</div>
	<script>

		function generateGatewayCommand() {
			const name = document.getElementById('gw-name').value.trim();
			const ip = document.getElementById('gw-ip').value.trim();
			const version = document.getElementById('gw-version').value.trim();
			const stopThresh = document.getElementById('gw-stop-thresh').value.trim();
			const alertThresh = document.getElementById('gw-alert-thresh').value.trim();
			const deleteThresh = document.getElementById('gw-delete-thresh').value.trim();
			const os = document.getElementById('gw-os').value.trim();
			const engineer = document.getElementById('gw-engineer-name').value.trim();

			const command =
				`add simple-gateway name ${name} ip-address ${ip} ips true version ${version} ` +
				`one-time-password vpn123 comments "pending integration - ${engineer}" ` +
				`logs-settings.free-disk-space-metrics percent ` +
				`logs-settings.forward-logs-to-log-server true ` +
				`logs-settings.rotate-log-on-schedule true ` +
				`logs-settings.stop-logging-when-free-disk-space-below true ` +
				`logs-settings.stop-logging-when-free-disk-space-below-threshold ${stopThresh} ` +
				`logs-settings.alert-when-free-disk-space-below true ` +
				`logs-settings.alert-when-free-disk-space-below-threshold ${alertThresh} ` +
				`logs-settings.delete-when-free-disk-space-below true ` +
				`logs-settings.delete-when-free-disk-space-below-threshold ${deleteThresh} ` +
				`os-name ${os}`;

			document.getElementById("gateway-command-output").value = command;
		}

		function copyGatewayCommand() {
			const textarea = document.getElementById("gateway-command-output");
			textarea.select();
			textarea.setSelectionRange(0, 99999);
			document.execCommand("copy");
			alert("Gateway command copied to clipboard!");
		}


	</script>

</body>

</html>
